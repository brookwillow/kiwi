# 唤醒词使用说明

## 可用的唤醒词

根据已下载的模型，你可以使用以下唤醒词：

1. **"Alexa"** - 类似Amazon Echo
2. **"Hey Jarvis"** - 类似钢铁侠的AI助手
3. **"Hey Mycroft"** - 开源语音助手
4. **"Hey Rhasspy"** - 另一个开源语音助手

## 使用步骤

1. **启动程序** - 运行 `python run_audio_visualizer.py`

2. **勾选三个复选框**：
   - ✅ 启用唤醒词检测
   - ✅ 启用 VAD 检测
   - ✅ 启用 ASR 识别

3. **点击"开始录音"**

4. **说唤醒词** - 清晰地说出以下任一唤醒词：
   - "Alexa"
   - "Hey Jarvis"
   - "Hey Mycroft"
   - "Hey Rhasspy"

5. **等待唤醒确认** - 看到状态显示"🎯 已唤醒"

6. **说话** - 现在可以说你要识别的内容

7. **等待识别** - VAD会自动检测语音结束并进行ASR识别

8. **查看结果** - 识别文本显示在"ASR识别结果"面板

## 调试技巧

### 查看实时得分
程序会每隔一段时间在控制台打印各个唤醒词的得分：
```
🔍 唤醒词得分: alexa: 0.123, hey_jarvis: 0.045, hey_mycroft: 0.012, ... (阈值: 0.30)
```

当你说唤醒词时，对应的得分应该会升高并超过阈值（0.30）

### 如果唤醒不成功

1. **音量太小** - 靠近麦克风，大声说
2. **发音不清** - 清晰、缓慢地说出唤醒词
3. **环境噪音** - 在安静环境测试
4. **阈值太高** - 可以在 `config/system_config.yaml` 中降低 threshold（当前0.3）

### 推荐测试顺序

1. 先试 **"Alexa"** - 这是最常用的，模型训练数据最多
2. 再试 **"Hey Jarvis"** - 也是常见的唤醒词
3. 最后试其他的

### 发音提示

- **"Alexa"** - 发音: 阿列克莎（重音在第二个音节）
- **"Hey Jarvis"** - 发音: 嘿 贾维斯（要说"Hey"）
- **"Hey Mycroft"** - 发音: 嘿 迈克罗夫特
- **"Hey Rhasspy"** - 发音: 嘿 拉斯比

## 配置参数

在 `config/system_config.yaml` 中：

```yaml
wakeword:
  enabled: true
  models: []                    # 空表示自动加载所有模型
  threshold: 0.3                # 检测阈值（0.2-0.5），越低越敏感
  cooldown_seconds: 3.0         # 唤醒后冷却时间
```

- **threshold**: 降低会更容易唤醒，但可能误触发；提高会更准确，但可能难唤醒
- **cooldown_seconds**: 唤醒后多长时间内不再检测唤醒词

## 工作流程

```
录音 → 唤醒词检测 → (检测到) → VAD → ASR → 重置等待下次唤醒
     ↑______________(未检测到)______________↑
```

## 故障排查

### 问题：一直显示"等待唤醒词"
- 检查麦克风是否正常工作
- 查看控制台的得分输出，确认模型在工作
- 尝试降低阈值到 0.2

### 问题：唤醒后没有识别
- 确保VAD和ASR都已启用
- 检查"状态"显示是否从"已唤醒"变为"检测到语音"
- 查看音量图，确认有声音输入

### 问题：误触发（没说唤醒词就唤醒了）
- 提高阈值到 0.4 或 0.5
- 减少环境噪音
- 检查是否有类似的声音（电视、音乐等）

## 控制台输出示例

正常工作时的输出：
```
✅ 唤醒词引擎初始化成功
   已加载的唤醒词: ['alexa', 'hey_jarvis', 'hey_mycroft', 'hey_rhasspy']
   检测阈值: 0.3
🔍 唤醒词得分: alexa: 0.123, hey_jarvis: 0.045, ... (阈值: 0.30)
🎤 唤醒词触发: alexa (置信度: 0.89)
🎯 检测到唤醒词: alexa (置信度: 0.89)
🎤 语音开始
🔇 语音结束 (时长: 1500ms)
✅ 音频有效 (音量: 0.0342)，准备识别
🔄 重置唤醒状态，等待下一次唤醒
```
